<!DOCTYPE html>
<html>

<head>
  <!-- Font Awesome CDN (no SRI to avoid blocking in WebView) -->
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.2/css/all.min.css"
    referrerpolicy="no-referrer" />
  <style>
    /* layout */
    div {
      margin-bottom: 0.5em;
    }

    #main-toolbar,
    #secondary-toolbar {
      display: flex;
      gap: 6px;
      align-items: center;
    }

    /* icon buttons */
    .icon-btn,
    .folder-btn {
      display: inline-flex;
      align-items: center;
      justify-content: center;
      padding: 4px;
      line-height: 1;
      min-width: 28px;
      min-height: 28px;
    }

    #main-toolbar .icon-btn i,
    #secondary-toolbar button i {
      font-size: 16px;
    }

    /* monospace helpers */
    .mono {
      white-space: pre-line;
      font-family: Consolas, monospace;
      font-size: 12px;
      color: #333;
    }

    .mono-dim {
      color: #444;
    }

    /* folder action buttons */
    .folder-btn {
      font-family: Consolas, monospace;
      font-size: 12px;
      text-align: left;
      overflow: hidden;
      text-overflow: ellipsis;
    }

    .folder-btn.excluded {
      background: #fdd;
    }

    /* tags */
    #tags-container {
      display: none;
    }

    #tags {
      display: flex;
      gap: 4px;
      flex-wrap: wrap;
    }

    .tag-chip {
      font-family: Consolas, monospace;
      font-size: 11px;
      padding: 1px 6px;
      border-radius: 999px;
      border: 1px solid #cfe;
      background: #eef;
      color: #224;
    }
  </style>
</head>

<body>
  <div id="main-toolbar">
    <button id="btn-delete" class="icon-btn" title="Delete selected files"></button>
    <button id="btn-tag" class="icon-btn" title="Tag selected files"></button>
    <button id="btn-avidemux" class="icon-btn" title="Send to Avidemux"></button>
    <!-- Reload button moved out of toolbar for floating placement -->
  </div>
  <!-- Floating reload button -->
  <button id="btn-reload" class="icon-btn reload-fab" title="Reload">
    <i class="fa-solid fa-rotate-right"></i>
  </button>
  <div id="secondary-toolbar"></div>
  <hr />
  <div id="file-info">
    <div id="sel-summary">(none)</div>
    <div id="sel-name" class="mono" style="display:none"></div>
    <div id="sel-path" class="mono mono-dim">(no path)</div>
    <div id="tags"></div>
  </div>
  <hr />
  <div id="file-actions">
  </div>
  <hr />
  <div id="chapters-section" style="display:none">
    <div class="mono-dim">Chapters:</div>
    <div id="chapters-list" class="mono"
      style="font-size:11px; max-height:200px; overflow:auto; display:flex; flex-direction:column; gap:4px;"></div>
  </div>
  <script type="module" src="./app.js"></script>
</body>
<style>
  /* Floating reload button styles */
  .reload-fab {
    position: fixed;
    right: 32px;
    bottom: 32px;
    z-index: 1000;
    width: 44px;
    height: 44px;
    border-radius: 50%;
    background: #4caf50;
    color: #fff;
    font-size: 22px;
    box-shadow: 0 4px 16px rgba(0, 0, 0, 0.18);
    display: flex;
    align-items: center;
    justify-content: center;
    transition: background 0.2s;
    border: none;
    cursor: pointer;
  }

  .reload-fab:hover {
    background: #388e3c;
  }

  .reload-fab i {
    font-size: 1.3em;
    pointer-events: none;
  }

  #chapters-list .chapter-row {
    display: flex;
    gap: 6px;
    align-items: center;
  }

  #chapters-list img {
    width: 72px;
    height: 72px;
    /* make thumbnails square */
    aspect-ratio: 1 / 1;
    object-fit: cover;
    /* crop to fill square */
    border: 1px solid #ccc;
  }

  #chapters-list .chap-text {
    display: flex;
    flex-direction: column;
    line-height: 1.1;
  }
</style>

</html>