<!DOCTYPE html>
<html>

<head>
  <style>
    div {
      margin-bottom: 0.5em;
    }
  </style>
</head>

<body>
  <div>
    Interactive page contents. Hello <span id="username">user</span>!
  </div>
  <hr />
  <div>
    <strong>Selected file:</strong>
    <div id="sel-name">(none)</div>
    <div id="sel-path" style="font-family: Consolas, monospace; font-size: 12px; color: #444">(no path)</div>
  </div>
  <div>
    <form onsubmit="submitForm(event)">
      <input type="text" name="toSend" placeholder="text to send"></input>
      <button type="submit">Submit</button>
    </form>
  </div>
  <div>
    <button onclick="ahk.global.button1()">Button 1</button>
    <button onclick="ahk.global.button2()">Button 2</button>
  </div>
  <script type="module">
    // script type="module" so we can use await

    // Set up a form submission function to pass the values to AHK
    window.submitForm = async function ( event ) {
      event.preventDefault();
      await ahk.global.SubmitForm( {
        toSend: event.target.querySelector( '[name="toSend"]' ).value
      } );
    };

    // Populate the username element
    const name = await ahk.global.A_UserName;
    document.querySelector( '#username' ).innerText = name;

    // Helper to render current selection from AHK globals
    async function renderSelection () {
      try {
        const fileName = await ahk.global.SelectedFileName;
        const filePath = await ahk.global.SelectedFilePath;
        document.querySelector( '#sel-name' ).innerText = fileName && fileName.trim() ? fileName : '(none)';
        document.querySelector( '#sel-path' ).innerText = filePath && filePath.trim() ? filePath : '(no path)';
      } catch ( e ) {
        // ignore if globals not yet available
      }
    }

    // Initial render and expose updater for AHK to call
    await renderSelection();
    window.updateSelectedFromAhk = renderSelection;
  </script>
</body>

</html>